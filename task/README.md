# Постаматы, посылки и покупки

## Введение

*Постарайся выполнить это упражнение за 30 минут*

Представь, что ты в компании, которая занимается сбором посылок и доставкой их в постаматы. Твоя задача -- написать запросы к базе данных с помощью методов Sequelize.

## Pre-Release

Выполни `npm i` и установи все зависимости. Открой файл `./db/database.json` и заполни поля:
- `"username"`
- `"password"`
- `"database"`
Используй данные пользователя, который у тебя уже есть в Postgres и который обладает правами `SUPERUSER`. Обязательно заполни вышеуказанные поля **в обоих режимах: `"test"` и `"development"`**, иначе тесты не запустятся.

Далее выполни команду в терминале: `npm run prepare-db`

Перед началом стоит немного ознакомиться с базой данных: загляни в модели, миграции и даже в сиды.

## Архитектура

В готовой базе данных 3 модели:

1. `Locker` -- модель постамата, содержит ключи:
   - `location` адрес расположения
   - `accessCode` код доступа
   - `capacity` вместимость
   - `indoor` находится внутри или снаружи
2. `Parcel` -- модель посылки, содержит ключи:
   - `recipient` получатель
   - `size` размер
   - `lockerId` id постамата, который хранит посылки
3. `Item` -- модель предмета, содержит ключи:
   - `name` название
   - `description` описание
   - `weight` вес
   - `parcelId` id посылки, в которую упакуют предмет

`Locker` связан с `Parcel` через one-to-many, а также `Parcel` связан с `Item` через one-to-many.


## Release 0

Открой файл с тестами `./spec/locker.spec.js` и внимательно изучи их. Задача -- описать методы в классе `QueryDB`, который находится в файле `queries.js`. Тесты запускаются командой `npm test`.

Всего методов 5: `allLocations, parcelsByLocation, recipientByItemName, accessCodeByItemId, totalWeightByLocation`. Все они должны возвращать промис, который резолвится в данные.

## Release 1

Все функции реализованы? Если получилось обойтись без вложенных `include`, значит мы знаем точки для роста! Перепиши 2 последних метода со вложенными `incldue`.